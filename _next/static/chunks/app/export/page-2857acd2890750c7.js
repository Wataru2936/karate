(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{1674:function(e,t,n){Promise.resolve().then(n.bind(n,592))},592:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(3827),s=n(4090),a=n(5790);function l(){let[e,t]=(0,s.useState)("");return(0,s.useEffect)(()=>{t((0,a.GS)())},[]),(0,r.jsxs)("div",{className:"space-y-8 fade-in",children:[(0,r.jsx)("div",{className:"glass-card p-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCC4"}),(0,r.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"CSV出力"})]})}),(0,r.jsxs)("div",{className:"glass-card p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"記録データのエクスポート"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"保存されているすべての記録データを1試合ごとにCSV形式でダウンロードできます。"}),(0,r.jsx)("button",{onClick:()=>{let t=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),r=URL.createObjectURL(t);n.setAttribute("href",r),n.setAttribute("download","karate_records_".concat(new Date().toISOString().split("T")[0],".csv")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)},className:"btn-primary px-8 py-4 text-lg",disabled:!e,children:"\uD83D\uDCE5 CSVをダウンロード"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-600 mb-1",children:"出力形式"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"1試合ごと"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[(0,r.jsx)("h4",{className:"font-medium text-green-600 mb-1",children:"データ項目"}),(0,r.jsx)("p",{className:"text-sm text-green-700",children:"得点・反則・先取"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[(0,r.jsx)("h4",{className:"font-medium text-purple-600 mb-1",children:"ファイル形式"}),(0,r.jsx)("p",{className:"text-sm text-purple-700",children:"CSV (UTF-8)"})]})]}),e&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"\uD83D\uDCCB プレビュー"}),(0,r.jsx)("div",{className:"bg-gray-50 p-4 rounded-xl overflow-x-auto border",children:(0,r.jsxs)("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap font-mono",children:[e.split("\n").slice(0,10).join("\n"),e.split("\n").length>10&&"\n...（以下省略）"]})}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[e.split("\n").length-1,"件の記録が含まれています"]})]}),!e&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCA"}),(0,r.jsx)("p",{className:"text-gray-500",children:"エクスポートするデータがありません"})]})]})]})}},5790:function(e,t,n){"use strict";n.d(t,{Fw:function(){return o},GN:function(){return p},GS:function(){return N},_x:function(){return f},bG:function(){return i},c3:function(){return c},jY:function(){return h},k0:function(){return u},se:function(){return m},v:function(){return g}});let r="karate_records",s="karate_user_info",a="karate_opponents",l="karate_tournaments",c=e=>{localStorage.setItem(s,JSON.stringify(e))},i=()=>{let e=localStorage.getItem(s);return e?JSON.parse(e):null},o=e=>{let t=new Date,n=new Date(e),r=t.getFullYear()-n.getFullYear(),s=t.getMonth()-n.getMonth();return(s<0||0===s&&t.getDate()<n.getDate())&&r--,r},u=e=>e<=6?"幼稚園":e<=12?"小学".concat(e-5,"年生"):e<=15?"中学".concat(e-11,"年生"):e<=18?"高校".concat(e-14,"年生"):e<=22?"大学".concat(e-17,"年生"):"一般",d=e=>{if(!e.trim())return;let t=m();t.includes(e)||(t.push(e),localStorage.setItem(a,JSON.stringify(t)))},m=()=>{let e=localStorage.getItem(a);return e?JSON.parse(e):[]},x=e=>{if(!e.trim())return;let t=p();t.includes(e)||(t.push(e),localStorage.setItem(l,JSON.stringify(t)))},p=()=>{let e=localStorage.getItem(l);return e?JSON.parse(e):[]},h=e=>{let t=g();t.push(e),localStorage.setItem(r,JSON.stringify(t)),e.opponentName&&d(e.opponentName),e.tournamentName&&x(e.tournamentName)},g=()=>{let e=localStorage.getItem(r);return e?JSON.parse(e):[]},f=e=>{let t=g().filter(t=>t.id!==e);localStorage.setItem(r,JSON.stringify(t))},N=()=>["試合ID,試合日,試合種別,大会名,対戦相手,技の記録,先取,自分反則カテゴリ1,自分反則カテゴリ2,相手反則カテゴリ1,相手反則カテゴリ2",...g().map(e=>{let t=e.techniques.map(e=>"".concat(e.area).concat(e.technique).concat(e.point,"点").concat(e.actor)).join("、"),n=e.penalties.filter(e=>"自分"===e.actor&&"カテゴリ1"===e.category).length,r=e.penalties.filter(e=>"自分"===e.actor&&"カテゴリ2"===e.category).length,s=e.penalties.filter(e=>"相手"===e.actor&&"カテゴリ1"===e.category).length,a=e.penalties.filter(e=>"相手"===e.actor&&"カテゴリ2"===e.category).length;return[e.id,e.date,e.matchType,e.tournamentName||"",e.opponentName||"",t,e.senshu||"",n,r,s,a]}).map(e=>e.join(","))].join("\n")}},function(e){e.O(0,[971,69,744],function(){return e(e.s=1674)}),_N_E=e.O()}]);