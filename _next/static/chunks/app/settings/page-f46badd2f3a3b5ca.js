(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{2593:function(e,t,n){Promise.resolve().then(n.bind(n,1077))},7907:function(e,t,n){"use strict";var a=n(5313);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})},1077:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(3827),r=n(4090),l=n(7907),s=n(5790);function i(){let e=(0,l.useRouter)(),[t,n]=(0,r.useState)(null),[i,c]=(0,r.useState)({name:"",birthDate:""}),[u,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=(0,s.bG)();e&&(n(e),c({name:e.name,birthDate:e.birthDate}))},[]),(0,a.jsx)("div",{className:"space-y-8 fade-in",children:(0,a.jsxs)("div",{className:"glass-card p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"⚙️"}),(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"設定"})]}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!i.name||!i.birthDate)return;let t=(0,s.Fw)(i.birthDate),a=(0,s.k0)(t),r={name:i.name,birthDate:i.birthDate,age:t,grade:a};(0,s.c3)(r),n(r),o(!0),setTimeout(()=>o(!1),2e3)},className:"space-y-6 max-w-md mx-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"お名前"}),(0,a.jsx)("input",{type:"text",className:"input-field",value:i.name,onChange:e=>c({...i,name:e.target.value}),placeholder:"山田太郎",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"生年月日"}),(0,a.jsx)("input",{type:"date",className:"input-field",value:i.birthDate,onChange:e=>c({...i,birthDate:e.target.value}),required:!0})]}),t&&(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"現在の情報"}),(0,a.jsxs)("p",{className:"text-blue-600",children:[t.name," (",t.age,"歳 / ",t.grade,")"]})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{type:"submit",className:"btn-primary flex-1",children:"設定を保存"}),(0,a.jsx)("button",{type:"button",onClick:()=>e.push("/"),className:"btn-secondary flex-1",children:"キャンセル"})]})]}),u&&(0,a.jsx)("div",{className:"mt-4 text-green-600 font-bold text-center",children:"設定を保存しました"})]})})}},5790:function(e,t,n){"use strict";n.d(t,{Fw:function(){return u},GN:function(){return d},GS:function(){return b},_x:function(){return x},bG:function(){return c},c3:function(){return i},jY:function(){return g},k0:function(){return o},se:function(){return h},v:function(){return p}});let a="karate_records",r="karate_user_info",l="karate_opponents",s="karate_tournaments",i=e=>{localStorage.setItem(r,JSON.stringify(e))},c=()=>{let e=localStorage.getItem(r);return e?JSON.parse(e):null},u=e=>{let t=new Date,n=new Date(e),a=t.getFullYear()-n.getFullYear(),r=t.getMonth()-n.getMonth();return(r<0||0===r&&t.getDate()<n.getDate())&&a--,a},o=e=>e<=6?"幼稚園":e<=12?"小学".concat(Math.min(e-5,6),"年生"):e<=15?"中学".concat(Math.min(e-11,3),"年生"):e<=18?"高校".concat(Math.min(e-14,3),"年生"):e<=22?"大学".concat(Math.min(e-17,4),"年生"):"一般",m=e=>{if(!e.trim())return;let t=h().filter(t=>t!==e);t.unshift(e),t.length>20&&(t=t.slice(0,20)),localStorage.setItem(l,JSON.stringify(t))},h=()=>{let e=localStorage.getItem(l);return e?JSON.parse(e):[]},f=e=>{if(!e.trim())return;let t=d().filter(t=>t!==e);t.unshift(e),t.length>20&&(t=t.slice(0,20)),localStorage.setItem(s,JSON.stringify(t))},d=()=>{let e=localStorage.getItem(s);return e?JSON.parse(e):[]},g=e=>{let t=p();t.push(e),localStorage.setItem(a,JSON.stringify(t)),e.opponentName&&m(e.opponentName),e.tournamentName&&f(e.tournamentName)},p=()=>{let e=localStorage.getItem(a);return e?JSON.parse(e):[]},x=e=>{let t=p().filter(t=>t.id!==e);localStorage.setItem(a,JSON.stringify(t))},b=()=>["試合ID,試合日,試合種別,大会名,対戦相手,技の記録,先取,自分反則C1,自分反則C2,相手反則C1,相手反則C2",...p().map(e=>{let t=e.techniques.map(e=>"".concat(e.area).concat(e.technique).concat(e.point,"点").concat(e.actor)).join("、"),n=e.penalties.filter(e=>"自分"===e.actor&&"C1"===e.category).length,a=e.penalties.filter(e=>"自分"===e.actor&&"C2"===e.category).length,r=e.penalties.filter(e=>"相手"===e.actor&&"C1"===e.category).length,l=e.penalties.filter(e=>"相手"===e.actor&&"C2"===e.category).length;return[e.id,e.date,e.matchType,e.tournamentName||"",e.opponentName||"",t,e.senshu||"",n,a,r,l]}).map(e=>e.join(","))].join("\n")}},function(e){e.O(0,[971,69,744],function(){return e(e.s=2593)}),_N_E=e.O()}]);