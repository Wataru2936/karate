(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{2593:function(e,t,n){Promise.resolve().then(n.bind(n,1077))},7907:function(e,t,n){"use strict";var a=n(5313);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})},1077:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(3827),r=n(4090),s=n(7907),l=n(5790);function c(){let e=(0,s.useRouter)(),[t,n]=(0,r.useState)(null),[c,i]=(0,r.useState)({name:"",birthDate:""});return(0,r.useEffect)(()=>{let e=(0,l.bG)();e&&(n(e),i({name:e.name,birthDate:e.birthDate}))},[]),(0,a.jsx)("div",{className:"space-y-8 fade-in",children:(0,a.jsxs)("div",{className:"glass-card p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"⚙️"}),(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"設定"})]}),(0,a.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!c.name||!c.birthDate)return;let a=(0,l.Fw)(c.birthDate),r=(0,l.k0)(a),s={name:c.name,birthDate:c.birthDate,age:a,grade:r};(0,l.c3)(s),n(s),alert("設定を更新しました！"),e.push("/")},className:"space-y-6 max-w-md mx-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"お名前"}),(0,a.jsx)("input",{type:"text",className:"input-field",value:c.name,onChange:e=>i({...c,name:e.target.value}),placeholder:"山田太郎",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"生年月日"}),(0,a.jsx)("input",{type:"date",className:"input-field",value:c.birthDate,onChange:e=>i({...c,birthDate:e.target.value}),required:!0})]}),t&&(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"現在の情報"}),(0,a.jsxs)("p",{className:"text-blue-600",children:[t.name," (",t.age,"歳 / ",t.grade,")"]})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{type:"submit",className:"btn-primary flex-1",children:"設定を保存"}),(0,a.jsx)("button",{type:"button",onClick:()=>e.push("/"),className:"btn-secondary flex-1",children:"キャンセル"})]})]})]})})}},5790:function(e,t,n){"use strict";n.d(t,{Fw:function(){return u},GN:function(){return h},GS:function(){return b},_x:function(){return x},bG:function(){return i},c3:function(){return c},jY:function(){return p},k0:function(){return o},se:function(){return d},v:function(){return g}});let a="karate_records",r="karate_user_info",s="karate_opponents",l="karate_tournaments",c=e=>{localStorage.setItem(r,JSON.stringify(e))},i=()=>{let e=localStorage.getItem(r);return e?JSON.parse(e):null},u=e=>{let t=new Date,n=new Date(e),a=t.getFullYear()-n.getFullYear(),r=t.getMonth()-n.getMonth();return(r<0||0===r&&t.getDate()<n.getDate())&&a--,a},o=e=>e<=6?"幼稚園":e<=12?"小学".concat(e-5,"年生"):e<=15?"中学".concat(e-11,"年生"):e<=18?"高校".concat(e-14,"年生"):e<=22?"大学".concat(e-17,"年生"):"一般",m=e=>{if(!e.trim())return;let t=d();t.includes(e)||(t.push(e),localStorage.setItem(s,JSON.stringify(t)))},d=()=>{let e=localStorage.getItem(s);return e?JSON.parse(e):[]},f=e=>{if(!e.trim())return;let t=h();t.includes(e)||(t.push(e),localStorage.setItem(l,JSON.stringify(t)))},h=()=>{let e=localStorage.getItem(l);return e?JSON.parse(e):[]},p=e=>{let t=g();t.push(e),localStorage.setItem(a,JSON.stringify(t)),e.opponentName&&m(e.opponentName),e.tournamentName&&f(e.tournamentName)},g=()=>{let e=localStorage.getItem(a);return e?JSON.parse(e):[]},x=e=>{let t=g().filter(t=>t.id!==e);localStorage.setItem(a,JSON.stringify(t))},b=()=>["試合ID,試合日,試合種別,大会名,対戦相手,技の記録,先取,自分反則カテゴリ1,自分反則カテゴリ2,相手反則カテゴリ1,相手反則カテゴリ2",...g().map(e=>{let t=e.techniques.map(e=>"".concat(e.area).concat(e.technique).concat(e.point,"点").concat(e.actor)).join("、"),n=e.penalties.filter(e=>"自分"===e.actor&&"カテゴリ1"===e.category).length,a=e.penalties.filter(e=>"自分"===e.actor&&"カテゴリ2"===e.category).length,r=e.penalties.filter(e=>"相手"===e.actor&&"カテゴリ1"===e.category).length,s=e.penalties.filter(e=>"相手"===e.actor&&"カテゴリ2"===e.category).length;return[e.id,e.date,e.matchType,e.tournamentName||"",e.opponentName||"",t,e.senshu||"",n,a,r,s]}).map(e=>e.join(","))].join("\n")}},function(e){e.O(0,[971,69,744],function(){return e(e.s=2593)}),_N_E=e.O()}]);