(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{952:function(e,t,a){Promise.resolve().then(a.bind(a,3865))},3865:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var s=a(3827),n=a(4090),l=a(6136),c=a(1196),r=a(5790);function i(){let[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)([]),[i,o]=(0,n.useState)("all"),[d,u]=(0,n.useState)("all"),[m,h]=(0,n.useState)({start:"",end:""});(0,n.useEffect)(()=>{(()=>{let e=(0,r.v)();t(e),l(e)})()},[]),(0,n.useEffect)(()=>{let t=[...e];switch("all"!==d&&(t=t.filter(e=>e.matchType===d)),i){case"recent":t=t.slice(0,10);break;case"custom":m.start&&m.end&&(t=t.filter(e=>{let t=new Date(e.date);return t>=new Date(m.start)&&t<=new Date(m.end)}))}l(t)},[e,i,d,m]);let x=()=>{let e={};return a.forEach(t=>{t.techniques.forEach(t=>{let a="".concat(t.technique).concat(t.subTechnique?" (".concat(t.subTechnique,")"):""," - ").concat(t.area);e[a]=(e[a]||0)+1})}),Object.entries(e).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,10)},g=()=>{let e={category1:0,category2:0};a.forEach(t=>{t.penalties.forEach(t=>{"カテゴリ1"===t.category&&e.category1++,"カテゴリ2"===t.category&&e.category2++})});let t=a.length;return{category1:t?(e.category1/t).toFixed(2):0,category2:t?(e.category2/t).toFixed(2):0}};return(0,s.jsxs)("div",{className:"space-y-8 fade-in",children:[(0,s.jsx)("div",{className:"glass-card p-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"分析"})]})}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"分析条件"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"期間"}),(0,s.jsxs)("select",{className:"select-field",value:i,onChange:e=>o(e.target.value),children:[(0,s.jsx)("option",{value:"all",children:"全期間"}),(0,s.jsx)("option",{value:"recent",children:"直近10試合"}),(0,s.jsx)("option",{value:"custom",children:"期間指定"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"試合種別"}),(0,s.jsxs)("select",{className:"select-field",value:d,onChange:e=>u(e.target.value),children:[(0,s.jsx)("option",{value:"all",children:"すべて"}),(0,s.jsx)("option",{value:"練習",children:"練習"}),(0,s.jsx)("option",{value:"大会",children:"大会"})]})]}),"custom"===i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"開始日"}),(0,s.jsx)("input",{type:"date",className:"input-field",value:m.start,onChange:e=>h({...m,start:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"終了日"}),(0,s.jsx)("input",{type:"date",className:"input-field",value:m.end,onChange:e=>h({...m,end:e.target.value})})]})]})]})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"技の得点割合"}),(0,s.jsx)("div",{className:"h-96",children:(0,s.jsx)(c.by,{data:(()=>{let e={};a.forEach(t=>{t.techniques.forEach(t=>{let a="".concat(t.technique," - ").concat(t.area);e[a]=(e[a]||0)+t.point})});let t=Object.keys(e),s=Object.values(e),n=s.reduce((e,t)=>e+t,0),l=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"];return{labels:t.map((e,t)=>{let a=n>0?(s[t]/n*100).toFixed(1):"0.0";return"".concat(e," (").concat(a,"%)")}),datasets:[{data:s,backgroundColor:l.slice(0,t.length),borderColor:l.slice(0,t.length),borderWidth:2}]}})(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}},tooltip:{callbacks:{label:function(e){let t=e.label||"",a=e.parsed;return"".concat(t,": ").concat(a,"点")}}}}}})})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"技の使用頻度ランキング"}),(0,s.jsxs)("div",{className:"space-y-3",children:[x().map((e,t)=>{let[a,n]=e;return(0,s.jsxs)("div",{className:"technique-card flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"font-medium",children:[t+1,". ",a]}),(0,s.jsxs)("span",{className:"text-blue-600 font-bold",children:[n,"回"]})]},t)}),0===x().length&&(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"データがありません"})]})]}),(0,s.jsxs)("div",{className:"glass-card p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"反則傾向（1試合平均）"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"penalty-card text-center",children:[(0,s.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"カテゴリ1"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:g().category1}),(0,s.jsx)("p",{className:"text-sm text-yellow-700",children:"回/試合"})]}),(0,s.jsxs)("div",{className:"penalty-card text-center",children:[(0,s.jsx)("h4",{className:"font-medium text-orange-800 mb-2",children:"カテゴリ2"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:g().category2}),(0,s.jsx)("p",{className:"text-sm text-orange-700",children:"回/試合"})]})]})]})]})}l.kL.register(l.qi,l.u,l.De)},5790:function(e,t,a){"use strict";a.d(t,{Fw:function(){return o},GN:function(){return x},GS:function(){return j},_x:function(){return f},bG:function(){return i},c3:function(){return r},jY:function(){return g},k0:function(){return d},se:function(){return m},v:function(){return p}});let s="karate_records",n="karate_user_info",l="karate_opponents",c="karate_tournaments",r=e=>{localStorage.setItem(n,JSON.stringify(e))},i=()=>{let e=localStorage.getItem(n);return e?JSON.parse(e):null},o=e=>{let t=new Date,a=new Date(e),s=t.getFullYear()-a.getFullYear(),n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&s--,s},d=e=>e<=6?"幼稚園":e<=12?"小学".concat(e-5,"年生"):e<=15?"中学".concat(e-11,"年生"):e<=18?"高校".concat(e-14,"年生"):e<=22?"大学".concat(e-17,"年生"):"一般",u=e=>{if(!e.trim())return;let t=m();t.includes(e)||(t.push(e),localStorage.setItem(l,JSON.stringify(t)))},m=()=>{let e=localStorage.getItem(l);return e?JSON.parse(e):[]},h=e=>{if(!e.trim())return;let t=x();t.includes(e)||(t.push(e),localStorage.setItem(c,JSON.stringify(t)))},x=()=>{let e=localStorage.getItem(c);return e?JSON.parse(e):[]},g=e=>{let t=p();t.push(e),localStorage.setItem(s,JSON.stringify(t)),e.opponentName&&u(e.opponentName),e.tournamentName&&h(e.tournamentName)},p=()=>{let e=localStorage.getItem(s);return e?JSON.parse(e):[]},f=e=>{let t=p().filter(t=>t.id!==e);localStorage.setItem(s,JSON.stringify(t))},j=()=>["試合ID,試合日,試合種別,大会名,対戦相手,技の記録,先取,自分反則カテゴリ1,自分反則カテゴリ2,相手反則カテゴリ1,相手反則カテゴリ2",...p().map(e=>{let t=e.techniques.map(e=>"".concat(e.area).concat(e.technique).concat(e.point,"点").concat(e.actor)).join("、"),a=e.penalties.filter(e=>"自分"===e.actor&&"カテゴリ1"===e.category).length,s=e.penalties.filter(e=>"自分"===e.actor&&"カテゴリ2"===e.category).length,n=e.penalties.filter(e=>"相手"===e.actor&&"カテゴリ1"===e.category).length,l=e.penalties.filter(e=>"相手"===e.actor&&"カテゴリ2"===e.category).length;return[e.id,e.date,e.matchType,e.tournamentName||"",e.opponentName||"",t,e.senshu||"",a,s,n,l]}).map(e=>e.join(","))].join("\n")}},function(e){e.O(0,[674,707,971,69,744],function(){return e(e.s=952)}),_N_E=e.O()}]);