(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{3470:function(e,t,n){Promise.resolve().then(n.bind(n,6389))},6389:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(3827),s=n(4090),r=n(8792),l=n(5790);function c(){let[e,t]=(0,s.useState)([]);(0,s.useEffect)(()=>{t((0,l.v)().sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()))},[]);let n=n=>{window.confirm("この記録を削除してもよろしいですか？")&&((0,l._x)(n),t(e.filter(e=>e.id!==n)))},c=(e,t)=>e.techniques.filter(e=>e.actor===t).reduce((e,t)=>e+t.point,0);return(0,a.jsxs)("div",{className:"space-y-8 fade-in",children:[(0,a.jsx)("div",{className:"glass-card p-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCB"}),(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"記録一覧"})]})}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(r.default,{href:"/record",className:"btn-primary px-8 py-4 text-lg",children:"➕ 新規記録"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,a.jsxs)("div",{className:"glass-card p-6 hover:scale-[1.02] transition-transform",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:[e.matchType," - ",e.date]}),e.tournamentName&&(0,a.jsx)("p",{className:"text-blue-600 font-medium",children:e.tournamentName}),e.opponentName&&(0,a.jsxs)("p",{className:"text-gray-600",children:["対戦相手: ",e.opponentName]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(r.default,{href:"/record/".concat(e.id),className:"btn-secondary px-4 py-2 text-sm",children:"編集"}),(0,a.jsx)("button",{onClick:()=>n(e.id),className:"btn-danger px-4 py-2 text-sm",children:"削除"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-xl",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-600",children:"自分"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:c(e,"自分")})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-red-50 rounded-xl",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-red-600",children:"相手"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-700",children:c(e,"相手")})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"技の記録"}),(0,a.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:e.techniques.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm p-2 rounded bg-gray-50",children:[(0,a.jsx)("span",{className:"自分"===e.actor?"text-blue-600":"text-red-600",children:e.actor})," - ",e.technique," - ",e.area," - ",e.point,"点"]},t))})]}),e.senshu&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("span",{className:"inline-block px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:["先取: ",e.senshu]})})]},e.id)),0===e.length&&(0,a.jsxs)("div",{className:"glass-card p-12 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"記録がありません"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"新規記録を追加してください"}),(0,a.jsx)(r.default,{href:"/record",className:"btn-primary",children:"最初の記録を追加"})]})]})]})}},5790:function(e,t,n){"use strict";n.d(t,{Fw:function(){return o},GN:function(){return h},GS:function(){return g},_x:function(){return N},bG:function(){return i},c3:function(){return c},jY:function(){return p},k0:function(){return d},se:function(){return u},v:function(){return f}});let a="karate_records",s="karate_user_info",r="karate_opponents",l="karate_tournaments",c=e=>{localStorage.setItem(s,JSON.stringify(e))},i=()=>{let e=localStorage.getItem(s);return e?JSON.parse(e):null},o=e=>{let t=new Date,n=new Date(e),a=t.getFullYear()-n.getFullYear(),s=t.getMonth()-n.getMonth();return(s<0||0===s&&t.getDate()<n.getDate())&&a--,a},d=e=>e<=6?"幼稚園":e<=12?"小学".concat(e-5,"年生"):e<=15?"中学".concat(e-11,"年生"):e<=18?"高校".concat(e-14,"年生"):e<=22?"大学".concat(e-17,"年生"):"一般",m=e=>{if(!e.trim())return;let t=u();t.includes(e)||(t.push(e),localStorage.setItem(r,JSON.stringify(t)))},u=()=>{let e=localStorage.getItem(r);return e?JSON.parse(e):[]},x=e=>{if(!e.trim())return;let t=h();t.includes(e)||(t.push(e),localStorage.setItem(l,JSON.stringify(t)))},h=()=>{let e=localStorage.getItem(l);return e?JSON.parse(e):[]},p=e=>{let t=f();t.push(e),localStorage.setItem(a,JSON.stringify(t)),e.opponentName&&m(e.opponentName),e.tournamentName&&x(e.tournamentName)},f=()=>{let e=localStorage.getItem(a);return e?JSON.parse(e):[]},N=e=>{let t=f().filter(t=>t.id!==e);localStorage.setItem(a,JSON.stringify(t))},g=()=>["試合ID,試合日,試合種別,大会名,対戦相手,技の記録,先取,自分反則カテゴリ1,自分反則カテゴリ2,相手反則カテゴリ1,相手反則カテゴリ2",...f().map(e=>{let t=e.techniques.map(e=>"".concat(e.area).concat(e.technique).concat(e.point,"点").concat(e.actor)).join("、"),n=e.penalties.filter(e=>"自分"===e.actor&&"カテゴリ1"===e.category).length,a=e.penalties.filter(e=>"自分"===e.actor&&"カテゴリ2"===e.category).length,s=e.penalties.filter(e=>"相手"===e.actor&&"カテゴリ1"===e.category).length,r=e.penalties.filter(e=>"相手"===e.actor&&"カテゴリ2"===e.category).length;return[e.id,e.date,e.matchType,e.tournamentName||"",e.opponentName||"",t,e.senshu||"",n,a,s,r]}).map(e=>e.join(","))].join("\n")}},function(e){e.O(0,[792,971,69,744],function(){return e(e.s=3470)}),_N_E=e.O()}]);