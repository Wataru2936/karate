(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{3470:function(e,t,a){Promise.resolve().then(a.bind(a,6389))},6389:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(3827),s=a(4090),r=a(8792),c=a(5790);function l(){let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{l("true"===localStorage.getItem("karate_color_swapped"))},[]);let i=(e,t)=>{let a=t.isSwapped?"red":"blue",n=t.isSwapped?"blue":"red";return"自分"===e?a:n};(0,s.useEffect)(()=>{t((0,c.v)().sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()))},[]);let o=a=>{window.confirm("この記録を削除してもよろしいですか？")&&((0,c._x)(a),t(e.filter(e=>e.id!==a)))},d=(e,t)=>e.techniques.filter(e=>e.actor===t).reduce((e,t)=>e+t.point,0);return(0,n.jsxs)("div",{className:"space-y-8 fade-in",children:[(0,n.jsx)("div",{className:"glass-card p-6",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCB"}),(0,n.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"記録一覧"})]})}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(r.default,{href:"/record",className:"btn-primary px-8 py-4 text-lg",children:"➕ 新規記録"})}),(0,n.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,n.jsxs)("div",{className:"glass-card p-6 hover:scale-[1.02] transition-transform",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:[e.matchType," - ",e.date]}),e.tournamentName&&(0,n.jsx)("p",{className:"text-blue-600 font-medium",children:e.tournamentName}),e.opponentName&&(0,n.jsxs)("p",{className:"text-gray-600",children:["対戦相手: ",e.opponentName]})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)(r.default,{href:"/record/".concat(e.id),className:"btn-secondary px-4 py-2 text-sm",children:"編集"}),(0,n.jsx)("button",{onClick:()=>o(e.id),className:"btn-danger px-4 py-2 text-sm",children:"削除"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,n.jsxs)("div",{className:"text-center p-3 bg-".concat(i("自分",e),"-50 rounded-xl"),children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-".concat(i("自分",e),"-600"),children:"自分"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-".concat(i("自分",e),"-700"),children:d(e,"自分")})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-".concat(i("相手",e),"-50 rounded-xl"),children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-".concat(i("相手",e),"-600"),children:"相手"}),(0,n.jsx)("p",{className:"text-2xl font-bold text-".concat(i("相手",e),"-700"),children:d(e,"相手")})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"技の記録"}),(0,n.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:e.techniques.map((t,a)=>(0,n.jsxs)("div",{className:"text-sm p-2 rounded bg-gray-50",children:[(0,n.jsx)("span",{className:"text-".concat(i(t.actor,e),"-600"),children:t.actor})," - ",t.technique," - ",t.area," - ",t.point,"点"]},a))})]}),e.senshu&&(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("span",{className:"inline-block px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:["先取: ",e.senshu]})})]},e.id)),0===e.length&&(0,n.jsxs)("div",{className:"glass-card p-12 text-center",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDD"}),(0,n.jsx)("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"記録がありません"}),(0,n.jsx)("p",{className:"text-gray-500 mb-6",children:"新規記録を追加してください"}),(0,n.jsx)(r.default,{href:"/record",className:"btn-primary",children:"最初の記録を追加"})]})]})]})}},5790:function(e,t,a){"use strict";a.d(t,{Fw:function(){return o},GN:function(){return h},GS:function(){return N},_x:function(){return g},bG:function(){return i},c3:function(){return l},jY:function(){return p},k0:function(){return d},se:function(){return u},v:function(){return f}});let n="karate_records",s="karate_user_info",r="karate_opponents",c="karate_tournaments",l=e=>{localStorage.setItem(s,JSON.stringify(e))},i=()=>{let e=localStorage.getItem(s);return e?JSON.parse(e):null},o=e=>{let t=new Date,a=new Date(e),n=t.getFullYear()-a.getFullYear(),s=t.getMonth()-a.getMonth();return(s<0||0===s&&t.getDate()<a.getDate())&&n--,n},d=e=>e<=6?"幼稚園":e<=12?"小学".concat(Math.min(e-5,6),"年生"):e<=15?"中学".concat(Math.min(e-11,3),"年生"):e<=18?"高校".concat(Math.min(e-14,3),"年生"):e<=22?"大学".concat(Math.min(e-17,4),"年生"):"一般",m=e=>{if(!e.trim())return;let t=u().filter(t=>t!==e);t.unshift(e),t.length>20&&(t=t.slice(0,20)),localStorage.setItem(r,JSON.stringify(t))},u=()=>{let e=localStorage.getItem(r);return e?JSON.parse(e):[]},x=e=>{if(!e.trim())return;let t=h().filter(t=>t!==e);t.unshift(e),t.length>20&&(t=t.slice(0,20)),localStorage.setItem(c,JSON.stringify(t))},h=()=>{let e=localStorage.getItem(c);return e?JSON.parse(e):[]},p=e=>{let t=f();t.push(e),localStorage.setItem(n,JSON.stringify(t)),e.opponentName&&m(e.opponentName),e.tournamentName&&x(e.tournamentName)},f=()=>{let e=localStorage.getItem(n);return e?JSON.parse(e):[]},g=e=>{let t=f().filter(t=>t.id!==e);localStorage.setItem(n,JSON.stringify(t))},N=()=>["試合ID,試合日,試合種別,大会名,対戦相手,技の記録,先取,自分反則C1,自分反則C2,相手反則C1,相手反則C2",...f().map(e=>{let t=e.techniques.map(e=>"".concat(e.area).concat(e.technique).concat(e.point,"点").concat(e.actor)).join("、"),a=e.penalties.filter(e=>"自分"===e.actor&&"C1"===e.category).length,n=e.penalties.filter(e=>"自分"===e.actor&&"C2"===e.category).length,s=e.penalties.filter(e=>"相手"===e.actor&&"C1"===e.category).length,r=e.penalties.filter(e=>"相手"===e.actor&&"C2"===e.category).length;return[e.id,e.date,e.matchType,e.tournamentName||"",e.opponentName||"",t,e.senshu||"",a,n,s,r]}).map(e=>e.join(","))].join("\n")}},function(e){e.O(0,[792,971,69,744],function(){return e(e.s=3470)}),_N_E=e.O()}]);